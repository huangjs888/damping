{"version":3,"file":"damping.min.js","sources":["../src/index.ts"],"sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-07-27 14:59:57\n * @Description: ******\n */\n\nfunction damping(value: number, max: number, expo: number, revoke: boolean = false) {\n  if (\n    value < 1 ||\n    max < 1 ||\n    // 反算的时候value必须小于max\n    (revoke && value > max) ||\n    expo <= 0 ||\n    expo > 1\n  ) {\n    return value;\n  }\n  if (revoke) {\n    return Math.pow(((max - 1) * value) / (max - value), 1 / expo);\n  }\n  return max / (1 + (max - 1) / Math.pow(value, expo));\n}\n\ntype DampingOption = {\n  max?: number;\n  mode?: number;\n  expo?: number;\n};\n// 阻尼值\nexport function performDamping(value: number, option: DampingOption = {}) {\n  if (value === 0) {\n    return 0;\n  }\n  const { max = 9999, mode = 0, expo = 0.88 } = option;\n  let _value = Math.abs(value);\n  if (_value < 1) {\n    if (mode === 1) {\n      // 倒数模式\n      _value = 1 / damping(1 / _value, max, expo);\n    } else {\n      // 加1模式\n      _value = damping(_value + 1, max, expo) - 1;\n    }\n  } else {\n    _value = damping(_value, max, expo);\n  }\n  return _value * (value > 0 ? 1 : -1);\n}\n// 阻尼原值\nexport function revokeDamping(value: number, option: DampingOption = {}) {\n  if (value === 0) {\n    return 0;\n  }\n  const { max = 9999, mode = 0, expo = 0.88 } = option;\n  let _value = Math.abs(value);\n  if (_value < 1) {\n    if (mode === 1) {\n      // 倒数模式\n      _value = 1 / damping(1 / _value, max, expo, true);\n    } else {\n      // 加1模式\n      _value = damping(_value + 1, max, expo, true) - 1;\n    }\n  } else {\n    _value = damping(_value, max, expo, true);\n  }\n  return _value * (value > 0 ? 1 : -1);\n}\n"],"names":["damping","value","max","expo","revoke","Math","pow","performDamping","option","mode","_value","abs","revokeDamping"],"mappings":"AAQA,SAASA,EAAQC,EAAeC,EAAaC,EAAcC,GAAkB,GAC3E,OACU,EAARH,GACM,EAANC,GAECE,GAAUH,EAAQC,GACX,GAARC,GACAA,EAAO,EAEAF,EAELG,EACKC,KAAKC,KAAMJ,EAAM,GAAKD,GAAUC,EAAMD,GAAQ,EAAIE,GAEpDD,GAAO,GAAKA,EAAM,GAAKG,KAAKC,IAAIL,EAAOE,GAChD,CAQO,SAASI,EAAeN,EAAeO,EAAwB,IACpE,GAAc,IAAVP,EACF,OAAO,EAET,MAAMC,IAAEA,EAAM,KAAIO,KAAEA,EAAO,EAACN,KAAEA,EAAO,KAASK,EAC9C,IAAIE,EAASL,KAAKM,IAAIV,GAYtB,OARIS,EAHS,EAATA,EACW,IAATD,EAEO,EAAIT,EAAQ,EAAIU,EAAQR,EAAKC,GAG7BH,EAAQU,EAAS,EAAGR,EAAKC,GAAQ,EAGnCH,EAAQU,EAAQR,EAAKC,GAEzBO,GAAUT,EAAQ,EAAI,GAAK,EACpC,CAEO,SAASW,EAAcX,EAAeO,EAAwB,IACnE,GAAc,IAAVP,EACF,OAAO,EAET,MAAMC,IAAEA,EAAM,KAAIO,KAAEA,EAAO,EAACN,KAAEA,EAAO,KAASK,EAC9C,IAAIE,EAASL,KAAKM,IAAIV,GAYtB,OARIS,EAHS,EAATA,EACW,IAATD,EAEO,EAAIT,EAAQ,EAAIU,EAAQR,EAAKC,GAAM,GAGnCH,EAAQU,EAAS,EAAGR,EAAKC,GAAM,GAAQ,EAGzCH,EAAQU,EAAQR,EAAKC,GAAM,GAE/BO,GAAUT,EAAQ,EAAI,GAAK,EACpC"}