{"version":3,"file":"damping.js","sources":["../src/index.ts"],"sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-07-27 14:59:57\n * @Description: ******\n */\n\nfunction damping(value: number, max: number, expo: number, revoke: boolean = false) {\n  if (\n    value < 1 ||\n    max < 1 ||\n    // 反算的时候value必须小于max\n    (revoke && value > max) ||\n    expo <= 0 ||\n    expo > 1\n  ) {\n    return value;\n  }\n  if (revoke) {\n    return Math.pow(((max - 1) * value) / (max - value), 1 / expo);\n  }\n  return max / (1 + (max - 1) / Math.pow(value, expo));\n}\n\ntype DampingOption = {\n  max?: number;\n  mode?: number;\n  expo?: number;\n};\n// 阻尼值\nexport function performDamping(value: number, option: DampingOption = {}) {\n  if (value === 0) {\n    return 0;\n  }\n  const { max = 9999, mode = 0, expo = 0.88 } = option;\n  let _value = Math.abs(value);\n  if (_value < 1) {\n    if (mode === 1) {\n      // 倒数模式\n      _value = 1 / damping(1 / _value, max, expo);\n    } else {\n      // 加1模式\n      _value = damping(_value + 1, max, expo) - 1;\n    }\n  } else {\n    _value = damping(_value, max, expo);\n  }\n  return _value * (value > 0 ? 1 : -1);\n}\n// 阻尼原值\nexport function revokeDamping(value: number, option: DampingOption = {}) {\n  if (value === 0) {\n    return 0;\n  }\n  const { max = 9999, mode = 0, expo = 0.88 } = option;\n  let _value = Math.abs(value);\n  if (_value < 1) {\n    if (mode === 1) {\n      // 倒数模式\n      _value = 1 / damping(1 / _value, max, expo, true);\n    } else {\n      // 加1模式\n      _value = damping(_value + 1, max, expo, true) - 1;\n    }\n  } else {\n    _value = damping(_value, max, expo, true);\n  }\n  return _value * (value > 0 ? 1 : -1);\n}\n"],"names":["damping","value","max","expo","revoke","Math","pow","performDamping","option","_option","_option$max","_option$mode","mode","_option$expo","_value","abs","revokeDamping","_option2","_option2$max","_option2$mode","_option2$expo"],"mappings":"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"}